---
title: 从零学架构（十九）
date: 2021-08-05 18:00:00
author: maybe
top: true
cover: true
toc: false
mathjax: false
summary: 存储架构模式之分片架构和分区架构
tags: 架构
categories:
- [架构]
---
## 存储架构模式之分片架构和分区架构

### 分片架构

#### 本质

![](/medias/assets/20210805172733.png)

#### 核心设计

![](/medias/assets/20210805172813.png)

##### 分片规则

![](/medias/assets/20210805173354.png)

##### 路由规则

![](/medias/assets/20210805173623.png)

配置中心案例

![](/medias/assets/20210805173745.png)

路由转发案例

![](/medias/assets/20210805174351.png)

**节点直接相互连接获取分片信息，通信成本大**

#### 分片架构高可用

##### 独立备份

![](/medias/assets/20210805174955.png)

##### 相互备份

![](/medias/assets/20210805175025.png)

##### 案例

![](/medias/assets/20210805175136.png)

### 分区架构

#### 本质

![](/medias/assets/20210805175456.png)

#### 全局路由

![](/medias/assets/20210805175612.png)

#### 备份策略

##### 集中式

![](/medias/assets/20210805180051.png)

1. 设计简单，各分区之间并无直接联系，可以做到互不影响
2. 扩展容易，如果需要增加新分区，只需将新增的分区也复制到备份中心即可，其它分区不受影响
3. 成本较高，需要建立一个独立的备份中心

##### 互备式

![](/medias/assets/20210805180308.png)

1. 设计比较复杂，各个分区除了要承担业务数据存储，还需要承担备份功能，相互之间相互关联和影响
2. 扩展麻烦，增加分区的时候需要调整其它分区
3. 成本低，直接利用现有机房和网络

##### 独立式

![](/medias/assets/20210805180535.png)

1. 设计简单，各分区互不影响
2. 扩展容易，新增分区只需要搭建自己的备份中心即可
3. 成本高，每个分区需要独立的备份中心，备份中心的场地成本是主要成本

#### 备份策略对比

![](/medias/assets/20210805180834.png)

**实际中集中式应用更多**

## 小结

![](/medias/assets/存储架构模式之分片架构和分区架构.png)