---
title: 从零学架构（五）
date: 2021-07-01 11:00:00
author: maybe
top: true
cover: true
toc: false
mathjax: false
summary: 实战（一）：外包学生管理系统架构设计
tags: 架构
categories:
- [架构]
---
## 外包学生管理系统架构设计

### 需求背景

随着学校的规模的不断扩大，学生数量的增加，需要处理的信息也日趋增大。不仅花费大量的教师资源，处理效率也十分低下。为提高学生管理的管理水平，优化资源，尽可能降低管理成本成为学生管理的新课题，学生管理系统是从学生管理现状出发，根据学生管理的新要求进行开发设计的，它需要解决学生信息管理数据信息量大修改不方便，对一系列数据进行分析时花费时间长等问题，帮助学生管理人员有效管理学生信息。因此学生信息管理系统可以通过系统规范化地管理、科学性统计和快速查询、修改、增加、删除等，提高信息的准确度以及日常管理的工作效率。本系统主要是应用于学生各类信息的管理，总体任务是实现学生信息关系的系统化、规范化、自动化，其主要任务是统计学生各类信息进行日常管理，如查询、修改、增加、删除、以及学生选课、成绩的查询等
功能设计的管理系统。

### 系统总体需求

系统主要应用于学校学生信息管理，总体任务是实现学生信息管理的系统化、规范化和自动化，其主要任务是管理学生相关信息，如学籍、课程、成绩、奖惩

### 系统详细需求

#### 学生管理

1. 系统登录：此功能面向所有用户角色，根据用户角色权限不一，功能权限也不一样。
2. 账号分配：学生账号由系统生成，给定相应权限，可进行密码更改，无法对系统成绩评定等功能做出相应干
   涉。教师账号由管理者（教务）通过系统生成，教师有对学生成绩评定和试卷评定的权限，同时兼容学生权
   限。管理（教务）权限由系统固有账号，是系统 root 权限，对教师有分配管理权限，对数据有增加、修改、删除、查询权限。
3. 账号绑定：学生账号可通过第三方如：手机号码、微信等自行绑定，可实现账号自助找回等。
4. 组织管理层级：按学生实际情况划分归属。 例如：软件学院—数字传媒方向（专业）—软件1306—苗雨
   乔。
5. 文件上传/下载：此功能针对所有用户开放，学生可以将自己课堂笔记、日常作业等相关信息在线传输，教
   师通过学生上传的相关作业、试卷信息进行相应评定，完成对学生平时成绩的评定。此功能一旦评定结束，所有用户只有查询、浏览的权限，除管理员外其他用户没有对成绩修改的权限。
6. 信息查询：此项功能包含课程查询（含课程体系、课时安排、课表、教师、教材等）、成绩查询、文件查
   询。

#### 课程管理

1. 课程录入：由管理员对相应课程体系进行录入，供学生、教师进行在线选择。
2. 选课功能：学生可以在线对自己的课程体系进行选择，相对应的课程选择功能类比。
3. 排课功能：此功能根据学生选定的课程和教学体系安排，对相应教师、教室、时间进行统一规划安排。
   排课功能备选开发方向为在线排课和人工录入，在线排课是系统根据课程要设置课程的名称、课时、上课
   的班级、代课老师等信息，除此之外，还可以选填排课时的优选项，例如：上课时间有限上午等系统自动
   生成课程信息，管理员有权限对课程安排作出添加、删除、修改等判定。
4. 教材选择：此功能由教务统一管理，根据每门课程选定相应教材。

#### 考试管理

1. 试卷区域分割：发起考试：期中的时候，教师可以创建一次考试；而在月考时可以根据上课的周数进行考
   试安排，如一般可以在在第八周、十二周、十六周分别创建三次考试。其中这些考试题目是在事先录入好的
   题库中按照教师设定的知识点、范围、难易程度以及题型自动生成的试卷。每创建一次考试之后，教师需要
   将出好的考试题进行分割点标注，然后印刷试卷，考试。考试过后，试卷会被扫描，然后教师需要将扫描件
   试卷录入系统之中，系统会根据标注点对试卷进行预处理和分割。教师进入系统，可以对已经分割好的试卷
   进行判分。
2. 平时成绩：此项功能包含学生平时所有相关成绩信息，例如：考勤主要是由教师终端自动生成的或者教师
   手动输入，时间期限为当天；课堂笔记主要是由学生在当堂课程结束后将自己的笔记上传然后由教师批阅给
   予成绩在下次上课前完成自动签名；课后作业主要是在每堂课之后，教师可以发起一次作业任务，学生应老
   师设定的时间内提交作业，老师会对作业进行批阅，在下次课前给予成绩评分，将以上方式计算得到的总成
   绩计入平时成绩。最后按照系统判定的平时成绩结合月考、期中、期末试卷成绩按相应比例得出学生最终成
   绩。
3. 评分判定：教师使用系统对上传的试卷分割区域作出相应的评分。由于教师要对试卷进行签字，我们建
   议教师在评分之前可以在试卷上进行签字，由此得到的扫描结果就有教师签字。如有额外需求，需要教师通
   过外设进行试卷签字，此项功能暂不做需求开发。

#### 权限管理

1. 系统使用者有学生、教师、管理员、辅导员。
2. 学生、教师、辅导员可以注册、登录、修改自己的信息，但注册信息需要管理员审核通过。
3. 学生只能查看自己的成绩，教师可以修改学生的成绩。
4. 辅导员可以查看学生的信息，可以设置学生的奖惩信息。
5. 教师可以上传考试试题，学生可以做题。

### 面向复杂度架构设计

![](/medias/assets/架构设计方法论.png)

#### 复杂度分析

1. 高性能？一个学校一般也就几万学生，排除高性能需求。（实际场景下，澄清后计算好容量）
2. 高可用？一个学校的正常运作，就算系统宕机，也不会造成多大的影响。但是学校数据比较重要，不允许大范围丢失，所以数据需要高可用。
3. 可扩展？整体业务复杂度比较高，且可预见会改来改去，或者增加新需求。分析后必须考虑可扩展需求。
4. 成本？一个学校系统，成本不会太高，不用考虑。
5. 安全性？学生管理系统里面都是学生的一些公开信息，不涉及什么隐私、金钱等，安全性要求不高。

#### 设计备选方案

##### 方案1

![](/medias/assets/20210701094229.png)

1. 系统按照模块拆分为独立的服务，单独部署。
2. 部署MySQL主备

##### 方案2

![](/medias/assets/20210701094303.png)

1. 只拆分模块不拆分服务，复制部署多个。
2. 部署MySQL主备

#### 根据架构设计三原则取舍

##### 判断维度

###### 业务

1. 业务当前量级
2. 业务发展速度
3. 业务发展形态

###### 团队

1. 团队的规模
2. 团队能力水平
3. 投入的资源

###### 技术

1. 已有的技术体系
2. 当前技术能力
3. 技术成熟度

**根据上面的三个维度分析判断，最终选择方案1**

##### 分析

###### 合适原则

1. 符合团队技术水平积累
2. 开发成本低
3. 系统运维成本低

###### 简单原则

1. 不进行系统拆分，部署维护简单
2. 没用微服务，无需微服务基础设施

###### 演化原则

1. 一次性交付，无需考虑太多后期演化
2. 学校学生数量不会发生太大变化，系统够用多年